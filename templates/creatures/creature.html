{% extends "base.html" %}

{% block content %}

<div>
  <br>
  <h1>{{ creature.name | title | safe }}</h1>

  <h4>{{ fluent(key="circle", lang=lang )}}: {{ creature.circle_rank }}</h4>
  <h4>{{ fluent(key="rarity", lang=lang )}}: {{ creature.rarity }}</h4>
  <h4>{{ fluent(key="found-in", lang=lang )}}: {{ creature.found_in }}</h4>
    <small>Created at: {{ creature.created_at | date(format="%Y-%m-%d %H:%M") }}</small>
    <small>Updated at: {{ creature.updated_at | date(format="%Y-%m-%d %H:%M") }}</small>

    <hr>

  <h4>Attributes</h4>
  <div class="container">
    <div class="row">
      <div class="col-sm">
        <ul>{{ fluent(key="dexterity", lang=lang )}}: {{ creature.dexterity }}</ul>
        <ul>{{ fluent(key="strength", lang=lang )}}: {{ creature.strength }}</ul>
        <ul>{{ fluent(key="constitution", lang=lang )}}: {{ creature.constitution }}</ul>
        <ul>{{ fluent(key="perception", lang=lang )}}: {{ creature.perception }}</ul>
        <ul>{{ fluent(key="willpower", lang=lang )}}: {{ creature.willpower }}</ul>
        <ul>{{ fluent(key="charisma", lang=lang )}}: {{ creature.charisma }}</ul>
      </div>
      <div class="col-sm">
        <ul>{{ fluent(key="initiative", lang=lang )}}: {{ creature.initiative }}</ul>
        <ul>{{ fluent(key="physical-defense", lang=lang )}}: {{ creature.pd }}</ul>
        <ul>{{ fluent(key="mystic-defense", lang=lang )}}: {{ creature.md }}</ul>
        <ul>{{ fluent(key="social-defense", lang=lang )}}: {{ creature.sd }}</ul>
        <ul>{{ fluent(key="physical-armor", lang=lang )}}: {{ creature.pa }}</ul>
        <ul>{{ fluent(key="mystic-armor", lang=lang )}}: {{ creature.ma }}</ul>
      </div>
      <div class="col-sm">
        <ul>{{ fluent(key="unconscious-rating", lang=lang )}}: {{ creature.unconsciousness_rating }}</ul>
        <ul>{{ fluent(key="death-rating", lang=lang )}}: {{ creature.death_rating }}</ul>
        <ul>{{ fluent(key="wound-rating", lang=lang )}}: {{ creature.wound }}</ul>
        <ul>{{ fluent(key="knockdown", lang=lang )}}: {{ creature.knockdown }}</ul>
        <ul>{{ fluent(key="recovery-rolls", lang=lang )}}: {{ creature.recovery_rolls }}</ul>
        <ul>{{ fluent(key="karma", lang=lang )}}: {{ creature.karma }}</ul>
      </div>
    </div>
    <div class="row">
      <ul>{{ fluent(key="movement", lang=lang )}}: {{ creature.movement }}</ul>
      <ul>{{ fluent(key="actions", lang=lang )}}: {{ creature.actions }}</ul>
    </div>
    
    {% if session_user != "" %}
    <a
      href="/{{ lang }}/edit_creature/{{ creature.id }}" 
      class="btn btn-dark">
      Edit
    </a>
  {% endif %}
  <hr>
  </div>
</div> <!-- End of Creature -->

<div class="container">
  <div class="row">
    <h3>Attacks</h3><br>
    {% if attacks %}
      {% for attack in attacks %}
      <div>
        <ul>{{ attack.name }}: {{ attack.action_step}} ({{ attack.effect_step }})</ul>
      </div> <!-- end-div htmx -->
      {% endfor %} <!-- attacks -->
    {% endif %}
    <hr>
  </div>
</div>
  
<div class="container">
  <div class="row">
    {% if powers %}
      <h3>Powers</h3><br>
      {% for power in powers %}
        <div 
          id="{{power.id}}-content"
          hx-swap="outerHTML"
          hx-target="this"
        >
          <ul>{{ power.name }}: {{ power.action_step}} ({{ power.effect_step }})</ul>
          {% if session_user != "" %}
          <button
            hx-get="/{{ lang }}/edit_power_form/{{ power.id }}" 
            class="btn btn-dark">
                    Edit
            </button>
        {% endif %}
        </div> <!-- end div htmx -->
      {% endfor %}
    {% endif %}  
  </div>
</div>

{% endblock content %}