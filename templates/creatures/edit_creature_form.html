{% extends "base.html" %}

{% block content %}

<div 
    id="{{creature.id}}-content"
    hx-swap="outerHTML"
    hx-target="this"
>
<h1>Edit {{ creature.name }}</h1>
    <form
        action="/{{ lang }}/edit_creature_post/{{ creature.id }}"
        method="POST"
    >
        <div>
            <label>Creature Name</label><br>
            <input class="form-control form-control-lg" type="text" name="name" placeholder="Add name here..." size=60 value="{{ creature.name }}" required>
        </div>
        <br>

        <div>
            <label>{{ fluent(key="circle", lang=lang )}}</label><br>
            <input class="form-control form-control-lg" type="number" name="circle_rank" placeholder="1" size=60 value="{{ creature.circle_rank }}" required>
        </div>
        <hr>
        <div>
            <label for="rarity">{{ fluent(key="rarity", lang=lang )}}</label>
            <select name="rarity" id="rarity_select">
                <option {% if creature.rarity == "Common" %}selected{% endif %} value="Common">Common</option>
                <option {% if creature.rarity == "Uncommon" %}selected{% endif %} value="Uncommon">Uncommon</option>
                <option {% if creature.rarity == "Rare" %}selected{% endif %} value="Rare">Rare</option>
                <option {% if creature.rarity == "Unique" %}selected{% endif %} value="Unique">Unique</option>
            </select>
        </div>

        <hr>

        <label>{{ fluent(key="found-in", lang=lang )}}</label>
        <div class="row">
            <div class="col-md-4">
                <div class="input-grp">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" name="jungle" id="flexSwitchCheckDefault" {%if 'Jungle' in creature.found_in %}checked{% endif %}>
                        <label class="form-check-label" for="flexSwitchCheckDefault">Jungle</label>
                    </div>
        
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" name="desert" id="flexSwitchCheckDefault" {%if 'Desert' in creature.found_in %}checked{% endif %}>
                        <label class="form-check-label" for="flexSwitchCheckDefault">Desert</label>
                    </div>
        
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" name="forest" id="flexSwitchCheckDefault" {%if 'Forest' in creature.found_in %}checked{% endif %}>
                        <label class="form-check-label" for="flexSwitchCheckDefault">Forest</label>
                    </div>
    
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" name="plains" id="flexSwitchCheckDefault" {%if 'Plains' in creature.found_in %}checked{% endif %}>
                        <label class="form-check-label" for="flexSwitchCheckDefault">Plains</label>
                    </div>
                    </div>
                </div>
    
                <div class="col-md-4">
                    <div class="input-grp">
    
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" name="urban" id="flexSwitchCheckDefault" {%if 'Urban' in creature.found_in %}checked{% endif %}>
                        <label class="form-check-label" for="flexSwitchCheckDefault">Urban</label>
                    </div>
        
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" name="mountain" id="flexSwitchCheckDefault" {%if 'Mountain' in creature.found_in %}checked{% endif %}>
                        <label class="form-check-label" for="flexSwitchCheckDefault">Mountain</label>
                    </div>
        
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" name="cavern" id="flexSwitchCheckDefault" {%if 'Cavern' in creature.found_in %}checked{% endif %}>
                        <label class="form-check-label" for="flexSwitchCheckDefault">Cavern</label>
                    </div>
                    </div>
                </div>
    
                <div class="col-md-4">
                    <div class="input-grp">
    
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" name="swamp" id="flexSwitchCheckDefault" {%if 'Swamp' in creature.found_in %}checked{% endif %}>
                        <label class="form-check-label" for="flexSwitchCheckDefault">Swamp</label>
                    </div>
        
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" name="kaer" id="flexSwitchCheckDefault" {%if 'Kaer' in creature.found_in %}checked{% endif %}>
                        <label class="form-check-label" for="flexSwitchCheckDefault">Kaer</label>
                    </div>
        
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" name="any" id="flexSwitchCheckDefault" {%if 'Any' in creature.found_in %}checked{% endif %}>
                        <label class="form-check-label" for="flexSwitchCheckDefault">Any</label>
                    </div>
                </div>
            </div>
        </div>

    <hr>

  <h2>Attributes</h2>
  <div class="container">
    <div class="row">
      <div class="col-sm">
        <ul>
            <div>
                <label>{{ fluent(key="dexterity", lang=lang )}}</label><br>
                <input class="form-control form-control-lg" type="number" name="dexterity" placeholder="5" size=60 value="{{ creature.dexterity }}" required>
            </div>
        </ul>
        <ul>
            <div>
                <label>{{ fluent(key="strength", lang=lang )}}</label><br>
                <input class="form-control form-control-lg" type="number" name="strength" placeholder="5" size=60 value="{{ creature.strength }}" required>
            </div>
        </ul>
        <ul>
            <div>
                <label>{{ fluent(key="constitution", lang=lang )}}</label><br>
                <input class="form-control form-control-lg" type="number" name="constitution" placeholder="5" size=60 value="{{ creature.constitution }}" required>
            </div>
        </ul>
        <ul>
            <div>
                <label>{{ fluent(key="perception", lang=lang )}}</label><br>
                <input class="form-control form-control-lg" type="number" name="perception" placeholder="5" size=60 value="{{ creature.perception }}" required>
            </div>
        </ul>
        <ul>
            <div>
                <label>{{ fluent(key="willpower", lang=lang )}}</label><br>
                <input class="form-control form-control-lg" type="number" name="willpower" placeholder="5" size=60 value="{{ creature.willpower }}" required>
            </div>
        </ul>
        <ul>
            <div>
                <label>{{ fluent(key="charisma", lang=lang )}}</label><br>
                <input class="form-control form-control-lg" type="number" name="charisma" placeholder="5" size=60 value="{{ creature.charisma }}" required>
            </div>
        </ul>
      </div>
      <div class="col-sm">
        <ul>
            <div>
                <label>{{ fluent(key="initiative", lang=lang )}}</label><br>
                <input class="form-control form-control-lg" type="number" name="initiative" placeholder="5" size=60 value="{{ creature.initiative }}" required>
            </div>
        </ul>
        <ul>
            <div>
                <label>{{ fluent(key="physical-defense", lang=lang )}}</label><br>
                <input class="form-control form-control-lg" type="number" name="pd" placeholder="5" size=60 value="{{ creature.pd }}" required>
            </div>
        </ul>
        <ul>
            <div>
                <label>{{ fluent(key="mystic-defense", lang=lang )}}</label><br>
                <input class="form-control form-control-lg" type="number" name="md" placeholder="5" size=60 value="{{ creature.md }}" required>
            </div>
        </ul>
        <ul>
            <div>
                <label>{{ fluent(key="social-defense", lang=lang )}}</label><br>
                <input class="form-control form-control-lg" type="number" name="sd" placeholder="5" size=60 value="{{ creature.sd }}" required>
            </div>
        </ul>
        <ul>
            <div>
                <label>{{ fluent(key="physical-armor", lang=lang )}}</label><br>
                <input class="form-control form-control-lg" type="number" name="pa" placeholder="5" size=60 value="{{ creature.pa }}" required>
            </div>
        </ul>
        <ul>
            <div>
                <label>{{ fluent(key="mystic-armor", lang=lang )}}</label><br>
                <input class="form-control form-control-lg" type="number" name="ma" placeholder="5" size=60 value="{{ creature.ma }}" required>
            </div>
        </ul>
      </div>
      <div class="col-sm">
        <ul>
            <div>
                <label>{{ fluent(key="unconscious-rating", lang=lang )}}</label><br>
                <input class="form-control form-control-lg" type="number" name="unconsciousness_rating" placeholder="25" size=60 value="{{ creature.unconsciousness_rating }}" required>
            </div>
        </ul>
        <ul>
            <div>
                <label>{{ fluent(key="death-rating", lang=lang )}}</label><br>
                <input class="form-control form-control-lg" type="number" name="death_rating" placeholder="30" size=60 value="{{ creature.death_rating }}" required>
            </div>
        </ul>
        <ul>
            <div>
                <label>{{ fluent(key="wound-rating", lang=lang )}}</label><br>
                <input class="form-control form-control-lg" type="number" name="wound" placeholder="9" size=60 value="{{ creature.wound }}" required>
            </div>
        </ul>
        <ul>
            <div>
                <label>{{ fluent(key="knockdown", lang=lang )}}</label><br>
                <input class="form-control form-control-lg" type="number" name="knockdown" placeholder="5" size=60 value="{{ creature.knockdown }}" required>
            </div>
        </ul>
        <ul>
            <div>
                <label>{{ fluent(key="recovery-rolls", lang=lang )}}</label><br>
                <input class="form-control form-control-lg" type="number" name="recovery_rolls" placeholder="5" size=60 value="{{ creature.recovery_rolls }}" required>
            </div>
        </ul>
        <ul>
            <div>
                <label>{{ fluent(key="karma", lang=lang )}}</label><br>
                <input class="form-control form-control-lg" type="number" name="karma" placeholder="5" size=60 value="{{ creature.karma }}" required>
            </div>
        </ul>
      </div>
    </div>
    <div class="row">
        <ul>
                <div>
                    <label>{{ fluent(key="movement", lang=lang )}}</label><br>
                    <input class="form-control form-control-lg" type="text" name="movement" placeholder="Add movement here..." size=60 value="{{ creature.movement }}" required>
                </div>
                <div>
                    <label>{{ fluent(key="actions", lang=lang )}}</label><br>
                    <input class="form-control form-control-lg" type="number" name="actions" placeholder="5" size=60 value="{{ creature.actions }}" required>
                </div>
        </ul>
    </div>
    
    {% if session_user != "" %}
    <button class="btn btn-primary" type="submit">Save</button>
    <a class="btn btn-info" href="/{{ lang }}/creature/{{ creature.slug }}">Cancel</a>
    {% endif %}
  <hr>
  </div>
    </form>
</div> <!-- End of Creature -->

<div
    class="container" 
    id="attacks"
    hx-target="this"
    hx-swap="outerHTML"
>
    <div class="row">
      <h3>Attacks</h3><br>
    </div>
      {% if attacks %}
      {% for attack in attacks %}
      <div 
        id="attack-{{ attack.id }}"
        hx-target="this"
        hx-swap="outerHTML"
      >
        <li>{{ attack.name }}: {{ attack.action_step}} ({{ attack.effect_step }}){% if attack.details %}: {{ attack.details }}{% endif %}   
        <button
          hx-get="/{{ lang }}/edit_attack/{{ attack.id }}"
          hx-target="#attack-{{ attack.id }}"
          class="btn btn-info btn-sm"
        >Edit</button> 
        <button
          hx-get="/{{ lang }}/delete_attack/{{ attack.id }}"
          hx-target="#attack-{{ attack.id }}"
          class="btn btn-danger btn-sm"
        >Delete</button>
        </li>
      </div> <!-- end-div htmx -->
      {% endfor %} <!-- attacks -->
      {% endif %}
      <br>
      <button
        class="btn btn-dark"
        hx-get="/{{ lang }}/add_attack/{{ creature.id }}"
        hx-target="this"
        hx-swap="outerHTML"
        >
        Add an Attack
      </button>
      
      <hr>
</div>
    
<div
class="container" 
id="powers"
hx-target="this"
hx-swap="outerHTML"
>
<div class="row">
  <h3>Powers and Abilities</h3><br>
</div>
  {% if powers %}
  {% for power in powers %}
  <div 
    id="power-{{ power.id }}"
    hx-target="this"
    hx-swap="outerHTML"
  >
    <li>{{ power.name }} ({{ power.action_type }} vs. {{ power.target }}): {{ power.action_step}} ({{ power.effect_step }}{% if power.resisted_by != 'NotApplicable' %} | {{ power.resisted_by }}{% endif %}){% if power.details %}: {{ power.details }}{% endif %}   
    <button
      hx-get="/{{ lang }}/edit_power/{{ power.id }}"
      hx-target="#power-{{ power.id }}"
      class="btn btn-info btn-sm"
    >Edit</button> 
    <button
          hx-get="/{{ lang }}/delete_power/{{ power.id }}"
          hx-target="#power-{{ power.id }}"
          class="btn btn-danger btn-sm"
    >Delete</button>
    </li>
  </div> <!-- end-div htmx -->
  {% endfor %} <!-- powers -->
  {% endif %}
  <br>
  <button
    class="btn btn-dark"
    hx-get="/{{ lang }}/add_power/{{ creature.id }}"
    hx-target="this"
    hx-swap="outerHTML"
    >
    Add a Power or Ability
  </button>
  
  <hr>
</div>

  {% endblock content %}